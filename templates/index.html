<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karigar-Sarthi - Your Digital Workshop</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1 data-key="main_title">Karigar-Sarthi</h1>
        <div class="header-controls">
            <p data-key="subtitle">Your AI-Powered Digital Workshop</p>
            <div class="language-toggle">
                <span data-key="lang_en">EN</span>
                <label class="switch">
                    <input type="checkbox" id="language-switch">
                    <span class="slider round"></span>
                </label>
                <span data-key="lang_hi">HI</span>
            </div>
            <a href="/logout" id="logout-btn">Logout</a>
        </div>
    </header>

    <main class="container">
        <!-- User's starting choices -->
        <div class="start-choice-container">
            <section id="idea-section" class="workflow-section">
                <h2 data-key="idea_title">1. Create a New Idea</h2>
                <p class="description" data-key="idea_desc">Describe your concept, and our AI will generate four unique designs inspired by diverse Indian aesthetics.</p>
                <form id="idea-form">
                    <input type="text" id="idea-prompt-input" data-key-placeholder="idea_placeholder" placeholder="e.g., 'a wooden elephant toy', 'a terracotta Diya'" required>
                    <button type="submit" data-key="idea_button">Generate Designs</button>
                </form>
            </section>
            <section id="upload-section" class="workflow-section">
                <h2 data-key="upload_title">2. Upload & Edit an Image</h2>
                <p class="description" data-key="upload_desc">Have a photo already? Upload it here to start editing or generate different angles.</p>
                <label for="upload-image-input" class="upload-btn" data-key="upload_button">Upload Your Image</label>
                <input type="file" id="upload-image-input" accept="image/*" class="hidden">
            </section>
        </div>

        <!-- Material Estimator Section -->
        <section id="material-estimator-section" class="workflow-section">
            <h2 data-key="material_title">3. Plan Your Craft & Get Materials</h2>
            <p class="description" data-key="material_desc">Upload a base image, then describe the final product you want to create. Our AI will generate a list of materials you'll need.</p>
            <div class="material-workflow-container">
                <div class="material-upload-area">
                    <label for="material-image-input" class="upload-btn" data-key="material_upload_button">Upload Base Image</label>
                    <input type="file" id="material-image-input" accept="image/*" class="hidden">
                    <div class="selected-image-container hidden" id="material-image-preview-container">
                        <img id="material-image-preview" src="" alt="Image for Material Estimation">
                    </div>
                </div>
                <div class="material-description-area">
                    <form id="material-form">
                        <textarea id="material-description-input" data-key-placeholder="material_placeholder" placeholder="Describe the final product..." required></textarea>
                        <div class="form-controls">
                            <button type="button" id="voice-input-btn" title="Use Voice Input">ðŸŽ¤</button>
                            <button type="submit" data-key="material_button">Get Materials List</button>
                        </div>
                    </form>
                </div>
            </div>
            <div id="material-results-container" class="hidden">
                <h3 data-key="material_results_title">Suggested Materials</h3>
                <div id="material-results-list"></div>
                <button id="find-suppliers-btn" data-key="find_suppliers_button" class="hidden">Find Online Suppliers</button>
                <div id="supplier-results-container" class="hidden">
                    <h4 data-key="suppliers_title">Online Suppliers</h4>
                    <div id="supplier-results-list"></div>
                </div>
            </div>
        </section>

        <!-- Galleries and subsequent steps appear here -->
        <div id="results-container">
            <section id="idea-gallery-section" class="workflow-section hidden">
                <h3 data-key="results_title">Generated Designs</h3>
                <p class="description" data-key="results_desc">Click an image to select it for the next steps.</p>
                <div id="idea-gallery" class="image-gallery"></div>
            </section>

            <section id="angle-section" class="workflow-section hidden">
                <h3 data-key="angle_title">Generate Different Angles</h3>
                <p class="description" data-key="angle_desc">Create professional product shots for your selected design.</p>
                <div class="selected-image-container">
                    <img id="selected-image-for-angles" src="" alt="Selected Design">
                </div>
                <button id="generate-angles-btn" data-key="angle_button">Generate 4 Angles</button>
                <div id="angle-gallery" class="image-gallery"></div>
            </section>

            <section id="edit-section" class="workflow-section hidden">
                <h3 data-key="edit_title">Edit Your Design</h3>
                <p class="description" data-key="edit_desc">Describe the changes you want to make to the selected photo.</p>
                <div class="edit-controls">
                    <div class="selected-image-container">
                        <img id="selected-image-for-edit" src="" alt="Image to Edit">
                    </div>
                    <div class="edit-form-container">
                        <form id="edit-form">
                            <input type="text" id="edit-prompt-input" data-key-placeholder="edit_placeholder" placeholder="e.g., 'make the background blue'" required>
                            <button type="submit" data-key="edit_button">Apply Edit</button>
                        </form>
                    </div>
                </div>
                <div id="edit-gallery" class="image-gallery single-image"></div>
            </section>
            
            <!-- NEW SECTION FOR PRODUCT LISTING -->
            <section id="listing-section" class="workflow-section hidden">
                <h3 data-key="listing_title">Create Product Listing</h3>
                <p class="description" data-key="listing_desc">Generate a title, story, and description to sell your product online.</p>
                <div class="selected-image-container">
                    <img id="selected-image-for-listing" src="" alt="Selected Design for Listing">
                </div>
                <button id="generate-listing-btn" data-key="listing_button">Generate Listing Details</button>
                <div id="listing-info-container" class="hidden">
                    <!-- Results will be injected here by script.js -->
                </div>
            </section>
        </div>
    </main>

    <div id="tips-loader" class="hidden">
        <div class="tip-content">
            <div class="spinner"></div>
            <p id="tip-text"></p>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>

