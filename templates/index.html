<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karigar-Sarthi - Your Digital Workshop</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="[https://fonts.googleapis.com](https://fonts.googleapis.com)">
    <link rel="preconnect" href="[https://fonts.gstatic.com](https://fonts.gstatic.com)" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1 data-key="main_title">Karigar-Sarthi</h1>
        <div class="header-controls">
            <p data-key="subtitle">Your AI-Powered Digital Workshop</p>
            <div class="language-toggle">
                <span data-key="lang_en">EN</span>
                <label class="switch">
                    <input type="checkbox" id="language-switch">
                    <span class="slider round"></span>
                </label>
                <span data-key="lang_hi">HI</span>
            </div>
            <a href="/logout" id="logout-btn">Logout</a>
        </div>
    </header>

    <main class="container">
        <!-- Step 1: User Input Section -->
        <section class="workflow-section input-section">
            <h2 data-key="input_title">Start Here: Describe Your Craft</h2>
            <div class="input-area">
                <!-- Image Upload Area -->
                <div class="input-subsection">
                    <h3 data-key="input_image_title">1. Provide an Image</h3>
                    <div class="image-preview-container hidden" id="image-preview-container">
                        <img id="image-preview" src="" alt="Your Uploaded Craft">
                    </div>
                    <div class="upload-options">
                        <label for="upload-input" class="action-btn" data-key="upload_button">Upload from Gallery</label>
                        <button id="camera-btn" class="action-btn secondary" data-key="camera_button">Use Camera</button>
                    </div>
                    <input type="file" id="upload-input" accept="image/*" class="hidden">
                </div>

                <!-- Description Area -->
                <div class="input-subsection">
                    <h3 data-key="input_desc_title">2. Describe the Product</h3>
                    <form id="description-form">
                        <textarea id="description-input" data-key-placeholder="input_desc_placeholder" placeholder="Describe your product or the changes you want to make..." required></textarea>
                        <button type="button" id="voice-input-btn" title="Use Voice Input">
                            <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
                        </button>
                    </form>
                </div>
            </div>
             <!-- Main Action Buttons -->
            <div class="main-actions">
                <button id="get-materials-btn" class="action-btn primary" data-key="material_button" disabled>Get Materials & Pricing</button>
                <button id="get-listing-btn" class="action-btn tertiary" data-key="listing_button" disabled>Generate Listing</button>
            </div>
        </section>

        <!-- Step 2: Results Section -->
        <section id="results-wrapper" class="hidden">
            <!-- Material Results -->
            <div id="materials-results-container" class="workflow-section results-container hidden">
                <h2 data-key="material_results_title">Materials & Pricing Strategy</h2>
                <div id="materials-list"></div>
                <div id="pricing-summary-container"></div>
                <button id="find-suppliers-btn" data-key="find_suppliers_button" class="action-btn secondary hidden">Find Online Suppliers</button>
                <div id="supplier-results-container" class="hidden">
                    <h3 data-key="suppliers_title">Online Suppliers</h3>
                    <div id="supplier-results-list"></div>
                </div>
            </div>
            <!-- Listing Results -->
            <div id="listing-results-container" class="workflow-section results-container hidden">
                 <h2 data-key="listing_results_title">Generated Product Listing</h2>
                <!-- Listing content will be injected here -->
            </div>
        </section>


        <!-- Optional: AI Design Studio -->
        <section id="ai-studio-section" class="workflow-section secondary-workflow">
            <div class="collapsible-header">
                <h2 data-key="idea_title">Optional: AI Design Studio</h2>
                <span class="toggle-icon">+</span>
            </div>
            <div class="collapsible-content">
                <p class="description" data-key="idea_desc">Don't have an idea? Describe a concept, and our AI will generate four unique designs for you.</p>
                <form id="idea-form">
                    <input type="text" id="idea-prompt-input" data-key-placeholder="idea_placeholder" placeholder="e.g., 'a wooden elephant toy'">
                    <button type="submit" class="action-btn" data-key="idea_button">Generate Designs</button>
                </form>
                 <!-- Galleries and subsequent steps appear here -->
                <div id="results-container" class="hidden">
                    <section id="idea-gallery-section" class="workflow-section">
                        <h3 data-key="results_title">Generated Designs</h3>
                        <p class="description" data-key="results_desc">Click an image to select it or use it as a base for material planning.</p>
                        <div id="idea-gallery" class="image-gallery"></div>
                    </section>

                    <section id="angle-section" class="workflow-section hidden">
                        <h3 data-key="angle_title">Generate Different Angles</h3>
                        <div class="selected-image-container">
                            <img id="selected-image-for-angles" src="" alt="Selected Design">
                        </div>
                        <button id="generate-angles-btn" class="action-btn" data-key="angle_button">Generate 4 Angles</button>
                        <div id="angle-gallery" class="image-gallery"></div>
                    </section>

                    <section id="edit-section" class="workflow-section hidden">
                        <h3 data-key="edit_title">Edit Your Design</h3>
                        <div class="edit-controls">
                            <div class="selected-image-container">
                                <img id="selected-image-for-edit" src="" alt="Image to Edit">
                            </div>
                            <form id="edit-form">
                                <input type="text" id="edit-prompt-input" data-key-placeholder="edit_placeholder" placeholder="e.g., 'make the background blue'">
                                <button type="submit" class="action-btn" data-key="edit_button">Apply Edit</button>
                            </form>
                        </div>
                        <div id="edit-gallery" class="image-gallery single-image"></div>
                    </section>
                </div>
            </div>
        </section>
    </main>

    <!-- Camera Modal -->
    <div id="camera-modal" class="modal hidden">
        <div class="modal-content">
            <video id="camera-feed" autoplay></video>
            <canvas id="camera-canvas" class="hidden"></canvas>
            <div class="modal-controls">
                <button id="capture-btn" class="action-btn">Capture</button>
                <button id="cancel-capture-btn" class="action-btn secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Loader -->
    <div id="tips-loader" class="hidden">
        <div class="tip-content">
            <div class="spinner"></div>
            <p id="tip-text"></p>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>

